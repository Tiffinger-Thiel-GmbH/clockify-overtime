(function(){var e={3924:function(e,s,t){"use strict";t(7512);var r=t(7417),a=t(2781);function o(e,s,t,r,o,n){const i=(0,a.up)("Overtime");return(0,a.wg)(),(0,a.j4)(i)}var n=t(5597);const i=e=>((0,a.dD)("data-v-26b3743b"),e=e(),(0,a.Cn)(),e),l={class:"header"},u=i((()=>(0,a._)("div",null,[(0,a._)("a",{href:"https://clockify.me/tracker"},[(0,a._)("img",{src:"https://clockify.me/assets/images/clockify-logo.svg",alt:"Clockify logo"})])],-1))),c={key:0,class:"avatar"},d=["src"],m=i((()=>(0,a._)("p",null,[(0,a.Uk)(' Enter your data below and click "Submit" to calculate overtime.'),(0,a._)("br"),(0,a.Uk)(" Disclaimer: This app does not have a backend ðŸ˜‰. Your data is only sent to the Clockify API. ")],-1))),f=i((()=>(0,a._)("a",{href:"https://clockify.me/user/settings"},"Get your API key here",-1))),j=["src"],p=(0,a.Uk)("Submit"),v=(0,a.Uk)(" Business hours (considering holidays): "),h=i((()=>(0,a._)("br",null,null,-1))),k=(0,a.Uk)(" Allocated hours: "),g=i((()=>(0,a._)("br",null,null,-1))),y={key:0},w=(0,a.Uk)(" Please check the following dates in Clockify. Each day that is not a bavarian holiday should be allocated as either: "),b=i((()=>(0,a._)("ul",null,[(0,a._)("li",null,"Work"),(0,a._)("li",null,"Vacation"),(0,a._)("li",null,"Sick leave")],-1)));function S(e,s,t,r,o,i){const S=(0,a.up)("a-col"),_=(0,a.up)("a-row"),O=(0,a.up)("a-input"),U=(0,a.up)("a-form-item"),z=(0,a.up)("a-select-option"),D=(0,a.up)("a-select"),H=(0,a.up)("a-range-picker"),I=(0,a.up)("a-button"),A=(0,a.up)("a-form");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",l,[u,e.formState.userAvatarUrl?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("img",{src:e.formState.userAvatarUrl,alt:"User Avatar"},null,8,d)])):(0,a.kq)("",!0)]),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,{offset:"4"},{default:(0,a.w5)((()=>[m])),_:1})])),_:1}),(0,a.Wm)(A,{ref:"formRef",model:e.formState,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{required:"","has-feedback":"",label:"Clockify API key",name:"apiKey"},{extra:(0,a.w5)((()=>[f])),default:(0,a.w5)((()=>[(0,a.Wm)(O,{value:e.formState.apiKey,"onUpdate:value":s[0]||(s[0]=s=>e.formState.apiKey=s)},null,8,["value"])])),_:1}),(0,a.Wm)(U,{required:"",label:"Workspace"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{value:e.formState.workspace,"onUpdate:value":s[1]||(s[1]=s=>e.formState.workspace=s),placeholder:"please select workspace"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.formState.workspaces,(e=>((0,a.wg)(),(0,a.j4)(z,{key:e.id,value:e.id},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.name),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),e.formState.isAdmin?((0,a.wg)(),(0,a.j4)(U,{key:0,required:"",label:"User"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{value:e.formState.userId,"onUpdate:value":s[2]||(s[2]=s=>e.formState.userId=s),placeholder:"please select user"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.formState.users,(e=>((0,a.wg)(),(0,a.j4)(z,{key:e.id,value:e.id},{default:(0,a.w5)((()=>[(0,a._)("span",null,[(0,a._)("img",{src:e.profilePicture,height:"20",width:"20",style:{"vertical-align":"middle","margin-right":"0.33em","border-radius":"50%"}},null,8,j),(0,a.Uk)(" "+(0,n.zw)(e.name),1)])])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(U,{required:"",label:"Period"},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{ranges:e.ranges,value:e.formState.period,"onUpdate:value":s[3]||(s[3]=s=>e.formState.period=s),style:{width:"100%"}},null,8,["ranges","value"])])),_:1}),(0,a.Wm)(U,{required:"",label:"Working hours per week"},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{value:e.formState.workingHours,"onUpdate:value":s[4]||(s[4]=s=>e.formState.workingHours=s)},null,8,["value"])])),_:1}),(0,a.Wm)(U,{"wrapper-col":{span:14,offset:4}},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{type:"primary",onClick:e.onSubmit},{default:(0,a.w5)((()=>[p])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","label-col","wrapper-col","rules"]),e.formState.overtime?((0,a.wg)(),(0,a.j4)(_,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{offset:"4"},{default:(0,a.w5)((()=>[(0,a._)("p",null,[v,(0,a._)("b",null,(0,n.zw)(e.formState.overtime.businessHours)+" h",1),h,k,(0,a._)("b",null,(0,n.zw)(e.formState.overtime.allocatedHours.toFixed(2))+" h",1),g,(0,a.Uk)(" "+(0,n.zw)(e.formState.overtime.isOver?"Overtime":"Missing time")+": ",1),(0,a._)("b",null,(0,n.zw)(e.formState.overtime.overtimeHours.toFixed(2))+" h",1),(0,a.Uk)(" "+(0,n.zw)(e.formState.overtime.isOver?"ðŸ˜":"ðŸ˜¨"),1)]),e.formState.overtime.missingDates.length?((0,a.wg)(),(0,a.iD)("div",y,[w,b,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.formState.overtime.missingDates,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e},(0,n.zw)(e),1)))),128))])):(0,a.kq)("",!0)])),_:1})])),_:1})):(0,a.kq)("",!0)])}t(3316);var _=t(9948),O=t(6632),U=t(3847),z=t(2582),D=t(5337),H=t(8075),I=t(8999),A=t.n(I);const K="https://api.clockify.me/api/v1",W="https://reports.api.clockify.me/v1",C=A().create({baseURL:K,validateStatus:e=>e<400}),Z=A().create({baseURL:W,validateStatus:e=>e<400});async function P(e){const s=await C.get("/user",{baseURL:K,headers:{"X-Api-Key":e}});return s.data}async function x(e,s){const t=await C.get(`/workspaces/${s}/users?status=ACTIVE&memberships=NONE&includeRoles=true`,{baseURL:K,headers:{"X-Api-Key":e}});return t.data}async function E(e){const s=await C.get("/workspaces",{baseURL:K,headers:{"X-Api-Key":e}});return s.data}async function L(e,s,t,r,a){const o=await Z.post(`/workspaces/${t}/reports/summary`,{dateRangeStart:r.toISOString(),dateRangeEnd:a.toISOString(),summaryFilter:{groups:["USER","DATE"]},users:{ids:[s],contains:"CONTAINS",status:"ALL"},amountShown:"HIDE_AMOUNT"},{baseURL:W,headers:{"X-Api-Key":e}});return o.data}async function R(e,s,t,r,a,o){const n=await L(e,s,t,(0,_.Z)(r),(0,O.Z)(a));if(console.log(n),n.groupOne.length)return q(n,r,a,o)}function q(e,s,t,r){const a=e.groupOne[0].duration,o=(0,U.Z)({start:s,end:t}).filter((e=>!(0,z.Z)(e)&&!(0,H.HD)(e,"BY"))).length,n=o*r*60*60,i=a-n,l=(0,U.Z)({start:s,end:t}).filter((s=>!(0,z.Z)(s)&&!(0,H.HD)(s,"BY")&&!e.groupOne[0].children.some((e=>e.name===(0,D.Z)(s,{representation:"date"})))));return{allocatedSeconds:a,businessSeconds:n,overtimeSeconds:i,missingDates:l}}var T=t(8726),N=t.n(T),Y=t(8987),F=(0,a.aZ)({name:"OvertimePanel",setup(){const e=localStorage.getItem("overtimeFormState"),s=e?JSON.parse(e):void 0,t=(0,Y.iH)(),r=(0,Y.qj)({apiKey:(null===s||void 0===s?void 0:s.apiKey)||"",period:[N()().startOf("year"),N()()],workingHours:(null===s||void 0===s?void 0:s.workingHours)||40,workspaces:[],users:[]}),o=async e=>{const s=await P(e),t=await E(e);r.currentUserId=s.id,r.userId=s.id,r.workspaces=t,r.workspace=s.activeWorkspace,r.userAvatarUrl=s.profilePicture},n=async e=>{var s;const t=await x(r.apiKey,e);r.users=t,r.isAdmin=null===(s=t.find((e=>e.id===r.currentUserId)))||void 0===s?void 0:s.roles.some((e=>"WORKSPACE_ADMIN"===e.role))};(0,a.YP)((()=>r.workspace),(async e=>{if(e&&r.currentUserId&&r.apiKey){r.userId=r.currentUserId;try{await n(e)}catch(s){console.error(s.message)}}}));const i=async(e,s)=>{if(s)try{await o(s)}catch(t){throw new Error(t.message)}};r.apiKey&&setTimeout((()=>t.value.validateFields("apiKey")),100);const l=async()=>{console.log("submit!",(0,Y.IU)(r));const e={apiKey:r.apiKey,workingHours:r.workingHours};if(localStorage.setItem("overtimeFormState",JSON.stringify(e)),r.userId&&r.workspace&&r.period){const e=await R(r.apiKey,r.userId,r.workspace,r.period[0].toDate(),r.period[1].toDate(),r.workingHours/5);r.overtime=e?{businessHours:N().duration(1e3*e.businessSeconds).asHours(),allocatedHours:N().duration(1e3*e.allocatedSeconds).asHours(),overtimeHours:N().duration(1e3*e.overtimeSeconds).asHours(),isOver:e.overtimeSeconds>0,missingDates:e.missingDates.map((e=>N()(e).format("LL")))}:void 0}},u={apiKey:[{validator:i,trigger:"blur"}]},c={"This Month (so far)":[N()().startOf("month"),N()().subtract(1,"day")],"Last Month":[N()().subtract(1,"month").startOf("month"),N()().subtract(1,"month").endOf("month")],"This Year (so far)":[N()().startOf("year"),N()().subtract(1,"day")],"Last Year":[N()().subtract(1,"year").startOf("year"),N()().subtract(1,"year").endOf("year")]};return{labelCol:{span:4},wrapperCol:{span:14},formRef:t,formState:r,rules:u,ranges:c,onSubmit:l}}}),M=t(5774);const X=(0,M.Z)(F,[["render",S],["__scopeId","data-v-26b3743b"]]);var B=X,J={name:"App",components:{Overtime:B}};const V=(0,M.Z)(J,[["render",o]]);var $=V,G=(t(3070),t(6470)),Q=t(4198),ee=t(8518),se=t(8600),te=t(6649),re=t(3864),ae=t(9225);(0,r.ri)($).use(G.Z).use(Q.ZP).use(ee.ZP).use(se.ZP).use(te.ZP).use(re.Z).use(ae.Z).mount("#app")},2782:function(e,s,t){var r={"./af":6283,"./af.js":6283,"./ar":752,"./ar-dz":9564,"./ar-dz.js":9564,"./ar-kw":5087,"./ar-kw.js":5087,"./ar-ly":4256,"./ar-ly.js":4256,"./ar-ma":4585,"./ar-ma.js":4585,"./ar-sa":7289,"./ar-sa.js":7289,"./ar-tn":2351,"./ar-tn.js":2351,"./ar.js":752,"./az":8002,"./az.js":8002,"./be":5834,"./be.js":5834,"./bg":9168,"./bg.js":9168,"./bm":2695,"./bm.js":2695,"./bn":8040,"./bn-bd":9869,"./bn-bd.js":9869,"./bn.js":8040,"./bo":5613,"./bo.js":5613,"./br":9704,"./br.js":9704,"./bs":6239,"./bs.js":6239,"./ca":8057,"./ca.js":8057,"./cs":7601,"./cs.js":7601,"./cv":1989,"./cv.js":1989,"./cy":8451,"./cy.js":8451,"./da":6284,"./da.js":6284,"./de":1713,"./de-at":2371,"./de-at.js":2371,"./de-ch":4563,"./de-ch.js":4563,"./de.js":1713,"./dv":67,"./dv.js":67,"./el":7628,"./el.js":7628,"./en-au":1070,"./en-au.js":1070,"./en-ca":9078,"./en-ca.js":9078,"./en-gb":2751,"./en-gb.js":2751,"./en-ie":531,"./en-ie.js":531,"./en-il":2252,"./en-il.js":2252,"./en-in":8161,"./en-in.js":8161,"./en-nz":1317,"./en-nz.js":1317,"./en-sg":9974,"./en-sg.js":9974,"./eo":1771,"./eo.js":1771,"./es":852,"./es-do":376,"./es-do.js":376,"./es-mx":4538,"./es-mx.js":4538,"./es-us":9265,"./es-us.js":9265,"./es.js":852,"./et":3090,"./et.js":3090,"./eu":1865,"./eu.js":1865,"./fa":4724,"./fa.js":4724,"./fi":9374,"./fi.js":9374,"./fil":7158,"./fil.js":7158,"./fo":5679,"./fo.js":5679,"./fr":8943,"./fr-ca":7660,"./fr-ca.js":7660,"./fr-ch":1953,"./fr-ch.js":1953,"./fr.js":8943,"./fy":1350,"./fy.js":1350,"./ga":6552,"./ga.js":6552,"./gd":9425,"./gd.js":9425,"./gl":6281,"./gl.js":6281,"./gom-deva":379,"./gom-deva.js":379,"./gom-latn":6027,"./gom-latn.js":6027,"./gu":1699,"./gu.js":1699,"./he":3066,"./he.js":3066,"./hi":3858,"./hi.js":3858,"./hr":3722,"./hr.js":3722,"./hu":2584,"./hu.js":2584,"./hy-am":80,"./hy-am.js":80,"./id":3113,"./id.js":3113,"./is":9806,"./is.js":9806,"./it":2150,"./it-ch":4609,"./it-ch.js":4609,"./it.js":2150,"./ja":60,"./ja.js":60,"./jv":3695,"./jv.js":3695,"./ka":4419,"./ka.js":4419,"./kk":5353,"./kk.js":5353,"./km":7993,"./km.js":7993,"./kn":4024,"./kn.js":4024,"./ko":7903,"./ko.js":7903,"./ku":9040,"./ku.js":9040,"./ky":5086,"./ky.js":5086,"./lb":344,"./lb.js":344,"./lo":394,"./lo.js":394,"./lt":2300,"./lt.js":2300,"./lv":3e3,"./lv.js":3e3,"./me":8153,"./me.js":8153,"./mi":3407,"./mi.js":3407,"./mk":3893,"./mk.js":3893,"./ml":4575,"./ml.js":4575,"./mn":7739,"./mn.js":7739,"./mr":1729,"./mr.js":1729,"./ms":9630,"./ms-my":4627,"./ms-my.js":4627,"./ms.js":9630,"./mt":1371,"./mt.js":1371,"./my":2904,"./my.js":2904,"./nb":6675,"./nb.js":6675,"./ne":813,"./ne.js":813,"./nl":9607,"./nl-be":2834,"./nl-be.js":2834,"./nl.js":9607,"./nn":1426,"./nn.js":1426,"./oc-lnc":103,"./oc-lnc.js":103,"./pa-in":587,"./pa-in.js":587,"./pl":5434,"./pl.js":5434,"./pt":5777,"./pt-br":1181,"./pt-br.js":1181,"./pt.js":5777,"./ro":97,"./ro.js":97,"./ru":5564,"./ru.js":5564,"./sd":6029,"./sd.js":6029,"./se":2888,"./se.js":2888,"./si":8383,"./si.js":8383,"./sk":1846,"./sk.js":1846,"./sl":9966,"./sl.js":9966,"./sq":5258,"./sq.js":5258,"./sr":9581,"./sr-cyrl":6162,"./sr-cyrl.js":6162,"./sr.js":9581,"./ss":679,"./ss.js":679,"./sv":3402,"./sv.js":3402,"./sw":1824,"./sw.js":1824,"./ta":9165,"./ta.js":9165,"./te":9498,"./te.js":9498,"./tet":9946,"./tet.js":9946,"./tg":4773,"./tg.js":4773,"./th":5429,"./th.js":5429,"./tk":7368,"./tk.js":7368,"./tl-ph":4232,"./tl-ph.js":4232,"./tlh":2689,"./tlh.js":2689,"./tr":138,"./tr.js":138,"./tzl":2134,"./tzl.js":2134,"./tzm":1200,"./tzm-latn":7330,"./tzm-latn.js":7330,"./tzm.js":1200,"./ug-cn":8043,"./ug-cn.js":8043,"./uk":7236,"./uk.js":7236,"./ur":2083,"./ur.js":2083,"./uz":9989,"./uz-latn":463,"./uz-latn.js":463,"./uz.js":9989,"./vi":5639,"./vi.js":5639,"./x-pseudo":8919,"./x-pseudo.js":8919,"./yo":3824,"./yo.js":3824,"./zh-cn":7521,"./zh-cn.js":7521,"./zh-hk":4422,"./zh-hk.js":4422,"./zh-mo":3387,"./zh-mo.js":3387,"./zh-tw":4458,"./zh-tw.js":4458};function a(e){var s=o(e);return t(s)}function o(e){if(!t.o(r,e)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=2782}},s={};function t(r){var a=s[r];if(void 0!==a)return a.exports;var o=s[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}t.m=e,function(){var e=[];t.O=function(s,r,a,o){if(!r){var n=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],o=e[c][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||n>=o)&&Object.keys(t.O).every((function(e){return t.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<n&&(n=o));if(i){e.splice(c--,1);var u=a();void 0!==u&&(s=u)}}return s}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,r){var a,o,n=r[0],i=r[1],l=r[2],u=0;if(n.some((function(s){return 0!==e[s]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(l)var c=l(t)}for(s&&s(r);u<n.length;u++)o=n[u],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},r=self["webpackChunkclockify_overtime"]=self["webpackChunkclockify_overtime"]||[];r.forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(3924)}));r=t.O(r)})();
//# sourceMappingURL=app.1355136d.js.map